# v0.2.6 Phase 2 Quick Start Guide

**Last Updated:** Dec 11, 2025  
**Status:** Ready for implementation  
**Approval:** User approved autonomous development

---

## What's Next

You have 3 major items for Phase 2:

### 1. Plugin 4: Code Refactoring Assistant (2 hours)
**File:** `src/lmapp/plugins/example_code_refactoring.py`

```python
class CodeRefactoringPlugin(BasePlugin):
    """Analyze and suggest code improvements"""
    
    def execute(self, action: str, code: str = "", **kwargs):
        if action == "analyze":
            # Detect patterns, inefficiencies, issues
            # Return suggestions with diffs
        elif action == "refactor":
            # Apply suggested changes
            # Run tests to verify
```

**Tests:** 25 tests covering AST analysis, pattern detection, safety checks

---

### 2. Plugin 5: Knowledge Base Builder (2 hours)
**File:** `src/lmapp/plugins/example_knowledge_base.py`

```python
class KnowledgeBasePlugin(BasePlugin):
    """Build personal knowledge graph from conversations"""
    
    def execute(self, action: str, text: str = "", query: str = "", **kwargs):
        if action == "add":
            # Extract concepts and tags
            # Add to knowledge base
        elif action == "search":
            # Find related knowledge
            # Expand with synonyms
        elif action == "export":
            # Export to markdown/JSON
```

**Tests:** 28 tests covering tagging, search, export

---

### 3. Web UI: GitHub Copilot-Style Browser Interface (7-10 hours) ðŸ†•
**Files:** 
- `src/lmapp/web/server.py` (FastAPI backend)
- `src/lmapp/web/static/index.html` (HTML)
- `src/lmapp/web/static/css/style.css` (Dark theme)
- `src/lmapp/web/static/js/app.js` (Main UI logic)

**Full Specification:** See `WEB_UI_IMPLEMENTATION.md`

**Quick Overview:**
```
Features:
- Real-time chat with streaming responses
- Document upload and search
- Plugin marketplace browser
- Settings panel
- Dark theme (GitHub Copilot inspired)
- Responsive mobile design

Technology:
- Backend: FastAPI (reuses LLMBackend, RAGSystem, PluginManager)
- Frontend: Vanilla HTML/CSS/JavaScript (no build tools)
- Communication: WebSocket for streaming
- Port: localhost:5000

Estimated LOC:
- Python (FastAPI + routes): 360 LOC
- HTML: 200 LOC
- CSS (dark theme): 550 LOC
- JavaScript: 950 LOC
- Tests: 30-40 tests
- Total: 1,310 LOC

Integration Points:
- LLMBackend: Use existing backend detection
- ChatSession: Reuse for chat functionality
- RAGSystem: Leverage for document search
- PluginManager: Show available plugins
- CacheManager: Cache responses
```

---

## Implementation Order (Recommended)

### Best Path Forward
1. **Start with Plugin 4** (Code Refactoring) - straightforward pattern matching
2. **Then Plugin 5** (Knowledge Base) - complements Plugin 4
3. **Then Web UI** - brings everything together with browser interface

### Why This Order
- Plugins 4-5 are simpler and faster
- By the time you build Web UI, you have more plugins to showcase
- Web UI becomes the "grand finale" of v0.2.6

---

## Test Coverage Expected

**Each Plugin: 25-28 tests**
- Dataclass/model tests (5-8)
- Feature tests (10-15)
- Integration tests (5-8)
- Edge cases (2-5)

**Web UI: 30-40 tests**
- API endpoint tests (15-20)
- Frontend responsiveness (5-8)
- WebSocket tests (5-8)
- Integration tests (5)

**Total v0.2.6:** 80-110 new tests
**Total Project:** 530-560 tests (currently 452)

---

## Git Workflow

**Each item should be 1 commit:**

```bash
# After Plugin 4
git add src/lmapp/plugins/example_code_refactoring.py tests/test_code_refactoring_plugin.py
git commit -m "feat: add plugin 4 - code refactoring assistant"
git push origin mother

# After Plugin 5
git add src/lmapp/plugins/example_knowledge_base.py tests/test_knowledge_base_plugin.py
git commit -m "feat: add plugin 5 - knowledge base builder"
git push origin mother

# After Web UI
git add src/lmapp/web/ tests/test_web_ui.py
git commit -m "feat: add web ui - github copilot-style browser interface"
git push origin mother
```

**Pre-commit validation** will run automatically:
- âœ… Syntax check (all files)
- âœ… Version consistency (setup.py, pyproject.toml, __init__.py)
- âœ… No large files added
- âœ… No merge conflicts

---

## Version Management

**Current version:** 0.2.5-dev

**For v0.2.6 Release:**
1. Update VERSION file: `0.2.5-dev` â†’ `0.2.6-dev`
2. Run sync script: `bash scripts/sync-version.sh`
3. Update CHANGELOG.md with v0.2.6 features
4. Commit: `git commit -m "release: bump version to v0.2.6-dev"`

**Don't bump yet** - do it at the end of Phase 2

---

## Testing During Development

**Run after each plugin/component:**

```bash
# Run new plugin tests
pytest tests/test_code_refactoring_plugin.py -v

# Run full plugin suite
pytest tests/test_*_plugin.py -v

# Run full suite (all 452+ tests)
pytest tests/ -q --tb=no

# Check coverage
pytest --cov=lmapp tests/ -q
```

**Success criteria:**
- All new tests pass
- No regressions (old tests still pass)
- Pre-commit checks pass before commit

---

## Architecture Patterns (Reference)

### Plugin Structure (Already Proven)
```python
from lmapp.plugins.plugin_manager import BasePlugin, PluginMetadata
from dataclasses import dataclass
from typing import Any, Dict

@dataclass
class ResultType:
    """Result structure"""
    success: bool
    data: Dict[str, Any]
    error: str = None

class MyPlugin(BasePlugin):
    @property
    def metadata(self) -> PluginMetadata:
        return PluginMetadata(
            name="my-plugin",
            version="0.1.0",
            author="community",
            description="Does something cool",
            license="MIT",
            dependencies=[],
            tags=["analysis", "optimization"]
        )
    
    def execute(self, action: str, **kwargs) -> Dict[str, Any]:
        if action == "feature1":
            return self._handle_feature1(**kwargs)
        # ... more actions
```

### Test Pattern (Already Proven)
```python
import pytest
from lmapp.plugins.example_my_plugin import MyPlugin

class TestMyPlugin:
    @pytest.fixture
    def plugin(self):
        return MyPlugin()
    
    def test_metadata(self, plugin):
        """Verify plugin metadata"""
        assert plugin.metadata.name == "my-plugin"
        assert plugin.metadata.version == "0.1.0"
        assert len(plugin.metadata.tags) > 0
    
    def test_execute_feature1(self, plugin):
        """Test feature 1"""
        result = plugin.execute("feature1", param="value")
        assert result["success"] is True
        # ... more assertions
```

---

## Debugging Tips

**If tests fail:**
1. Check import paths (BasePlugin from plugin_manager, not base)
2. Verify PluginMetadata fields (no extra parameters)
3. Check dataclass definitions (frozen=False for mutability)
4. Run single test: `pytest tests/test_*.py::TestClass::test_method -v`

**If Web UI doesn't work:**
1. Verify FastAPI is available: `pip list | grep fastapi`
2. Check port 5000 is free: `lsof -i :5000`
3. Test API endpoints with curl: `curl http://localhost:5000/api/models`
4. Check browser console for JS errors (F12)

**If pre-commit fails:**
1. Check for syntax errors: `python -m py_compile file.py`
2. Check for large files: `git ls-files -s | grep ' 1000000 '`
3. Check version consistency: `grep -r "0.2.5-dev" src/ setup.py`

---

## Time Estimates

| Item | Estimate | Note |
|------|----------|------|
| Plugin 4 (Code Refactoring) | 2 hours | Straightforward patterns |
| Plugin 5 (Knowledge Base) | 2 hours | Similar structure to Plugin 4 |
| Web UI (Backend) | 2-3 hours | FastAPI integration |
| Web UI (Frontend) | 4-5 hours | CSS + JavaScript complexity |
| Web UI (Testing) | 1-2 hours | API + UI tests |
| Testing & Polish | 1-2 hours | Final verification |
| **Total Phase 2** | **12-16 hours** | ~2 days of focused work |

**v0.2.6 Release:** Dec 25, 2025 (14 days away)

---

## Strategic Alignment

**User's Vision:**
1. âœ… "Offline GitHub Copilot alternative" â†’ Plugins provide this
2. âœ… "AI search engine for local docs" â†’ Document Chatbot + Web UI
3. âœ… "Endless possibilities" â†’ Plugin ecosystem proven extensible
4. âœ… **NEW:** "Self-hosted browser website" â†’ Web UI delivers this

**With Web UI Complete:**
- Users can access LMAPP from browser (not just CLI)
- Modern interface similar to Copilot
- All plugins accessible from UI
- Local, no external services needed
- Meets all 4 strategic goals ðŸŽ¯

---

## Files to Review Before Starting

1. **Plugin patterns:** `src/lmapp/plugins/example_translator.py`
2. **Test patterns:** `tests/test_translator_plugin.py`
3. **Web UI spec:** `WEB_UI_IMPLEMENTATION.md` (detailed, 150+ lines)
4. **Roadmap:** `V0.2.6_ROADMAP.md`
5. **Progress:** `V0.2.6_PROGRESS.md` (this session's work)

---

## User Approval Status

âœ… **Approved for autonomous development**
- "i approve of all actions, no further user input required"
- No additional user input needed
- Continue with Phase 2 as planned
- Release target: Dec 25, 2025

**Ready to start whenever you want!** ðŸš€
